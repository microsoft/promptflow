inputs:
  question:
    type: string
    default: Please describe this image.
  input_image:
    type: image
    default: https://developer.microsoft.com/_devcom/images/logo-ms-social.png
outputs:
  answer:
    type: string
    reference: ${question_on_image.output}
  output_image:
    type: string
    reference: ${flip_image.output}
nodes:
- name: question_on_image
  type: custom_llm
  source:
    type: package_with_prompt
    tool: promptflow.tools.openai_gpt4v.OpenAI.chat
    path: question_on_image.jinja2
  inputs:
    connection: aoai_gpt4v_connection
    question: ${inputs.question}
    test_image: ${flip_image.output}
    model: gpt-4-vision-preview
    max_tokens: 200
- name: flip_image
  type: python
  source:
    type: code
    path: flip_image.py
  inputs:
    input_image: ${inputs.input_image}
